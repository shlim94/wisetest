/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   4.1.0+f046478d
 */
(function(n,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):n.ES6Promise=t()})(this,function(){"use strict";function pt(n){var t=typeof n;return n!==null&&(t==="object"||t==="function")}function ut(n){return typeof n=="function"}function wt(n){b=n}function bt(n){r=n}function gt(){return function(){return process.nextTick(e)}}function ni(){return typeof w!="undefined"?function(){w(e)}:k()}function ti(){var n=0,i=new ht(e),t=document.createTextNode("");return i.observe(t,{characterData:!0}),function(){t.data=n=++n%2}}function ii(){var n=new MessageChannel;return n.port1.onmessage=e,function(){return n.port2.postMessage(0)}}function k(){var n=setTimeout;return function(){return n(e,1)}}function e(){for(var t,i,n=0;n<f;n+=2)t=u[n],i=u[n+1],t(i),u[n]=undefined,u[n+1]=undefined;f=0}function ri(){try{var t=require,n=t("vertx");return w=n.runOnLoop||n.runOnContext,ni()}catch(i){return k()}}function g(n,t){var e=arguments,f=this,i=new this.constructor(o),u;return i[c]===undefined&&yt(i),u=f._state,u?function(){var n=e[u-1];r(function(){return vt(u,i,n,f._result)})}():tt(f,i,n,t),i}function nt(n){var i=this,t;return n&&typeof n=="object"&&n.constructor===i?n:(t=new i(o),v(t,n),t)}function o(){}function ui(){return new TypeError("You cannot resolve a promise with itself")}function fi(){return new TypeError("A promises callback cannot return that same promise.")}function ct(n){try{return n.then}catch(t){return a.error=t,a}}function ei(n,t,i,r){try{n.call(t,i,r)}catch(u){return u}}function oi(n,u,f){r(function(n){var r=!1,e=ei(f,u,function(t){r||(r=!0,u!==t?v(n,t):i(n,t))},function(i){r||(r=!0,t(n,i))},"Settle: "+(n._label||" unknown promise"));!r&&e&&(r=!0,t(n,e))},n)}function si(n,r){r._state===l?i(n,r._result):r._state===h?t(n,r._result):tt(r,undefined,function(t){return v(n,t)},function(i){return t(n,i)})}function lt(n,r,u){r.constructor===n.constructor&&u===g&&r.constructor.resolve===nt?si(n,r):u===a?(t(n,a.error),a.error=null):u===undefined?i(n,r):ut(u)?oi(n,r,u):i(n,r)}function v(n,r){n===r?t(n,ui()):pt(r)?lt(n,r,ct(r)):i(n,r)}function hi(n){n._onerror&&n._onerror(n._result);it(n)}function i(n,t){n._state===s&&(n._result=t,n._state=l,n._subscribers.length!==0&&r(it,n))}function t(n,t){n._state===s&&(n._state=h,n._result=t,r(hi,n))}function tt(n,t,i,u){var f=n._subscribers,e=f.length;n._onerror=null;f[e]=t;f[e+l]=i;f[e+h]=u;e===0&&n._state&&r(it,n)}function it(n){var i=n._subscribers,f=n._state,t;if(i.length!==0){var r=undefined,u=undefined,e=n._result;for(t=0;t<i.length;t+=3)r=i[t],u=i[t+f],r?vt(f,r,u,e):u(e);n._subscribers.length=0}}function at(){this.error=null}function ci(n,t){try{return n(t)}catch(i){return p.error=i,p}}function vt(n,r,u,f){var c=ut(u),e=undefined,a=undefined,o=undefined,y=undefined;if(c){if(e=ci(u,f),e===p?(y=!0,a=e.error,e.error=null):o=!0,r===e){t(r,fi());return}}else e=f,o=!0;r._state!==s||(c&&o?v(r,e):y?t(r,a):n===l?i(r,e):n===h&&t(r,e))}function li(n,i){try{i(function(t){v(n,t)},function(i){t(n,i)})}catch(r){t(n,r)}}function ai(){return rt++}function yt(n){n[c]=rt++;n._state=undefined;n._result=undefined;n._subscribers=[]}function y(n,r){this._instanceConstructor=n;this.promise=new n(o);this.promise[c]||yt(this.promise);et(r)?(this.length=r.length,this._remaining=r.length,this._result=new Array(this.length),this.length===0?i(this.promise,this._result):(this.length=this.length||0,this._enumerate(r),this._remaining===0&&i(this.promise,this._result))):t(this.promise,vi())}function vi(){return new Error("Array Methods must be provided an Array")}function yi(n){return new y(this,n).promise}function pi(n){var t=this;return et(n)?new t(function(i,r){for(var f=n.length,u=0;u<f;u++)t.resolve(n[u]).then(i,r)}):new t(function(n,t){return t(new TypeError("You must pass an array to race."))})}function wi(n){var r=this,i=new r(o);return t(i,n),i}function bi(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");}function ki(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}function n(t){this[c]=ai();this._result=this._state=undefined;this._subscribers=[];o!==t&&(typeof t!="function"&&bi(),this instanceof n?li(this,t):ki())}function di(){var t=undefined,i,r;if(typeof global!="undefined")t=global;else if(typeof self!="undefined")t=self;else try{t=Function("return this")()}catch(u){throw new Error("polyfill failed because global object is unavailable in this environment");}if(i=t.Promise,i){r=null;try{r=Object.prototype.toString.call(i.resolve())}catch(u){}if(r==="[object Promise]"&&!i.cast)return}t.Promise=n}var ft=undefined,u,d,c,p,rt;ft=Array.isArray?Array.isArray:function(n){return Object.prototype.toString.call(n)==="[object Array]"};var et=ft,f=0,w=undefined,b=undefined,r=function(n,t){u[f]=n;u[f+1]=t;f+=2;f===2&&(b?b(e):d())};var ot=typeof window!="undefined"?window:undefined,st=ot||{},ht=st.MutationObserver||st.WebKitMutationObserver,kt=typeof self=="undefined"&&typeof process!="undefined"&&{}.toString.call(process)==="[object process]",dt=typeof Uint8ClampedArray!="undefined"&&typeof importScripts!="undefined"&&typeof MessageChannel!="undefined";u=new Array(1e3);d=undefined;d=kt?gt():ht?ti():dt?ii():ot===undefined&&typeof require=="function"?ri():k();c=Math.random().toString(36).substring(16);var s=void 0,l=1,h=2,a=new at;return p=new at,rt=0,y.prototype._enumerate=function(n){for(var t=0;this._state===s&&t<n.length;t++)this._eachEntry(n[t],t)},y.prototype._eachEntry=function(t,i){var r=this._instanceConstructor,e=r.resolve,u,f;e===nt?(u=ct(t),u===g&&t._state!==s?this._settledAt(t._state,i,t._result):typeof u!="function"?(this._remaining--,this._result[i]=t):r===n?(f=new r(o),lt(f,t,u),this._willSettleAt(f,i)):this._willSettleAt(new r(function(n){return n(t)}),i)):this._willSettleAt(e(t),i)},y.prototype._settledAt=function(n,r,u){var f=this.promise;f._state===s&&(this._remaining--,n===h?t(f,u):this._result[r]=u);this._remaining===0&&i(f,this._result)},y.prototype._willSettleAt=function(n,t){var i=this;tt(n,undefined,function(n){return i._settledAt(l,t,n)},function(n){return i._settledAt(h,t,n)})},n.all=yi,n.race=pi,n.resolve=nt,n.reject=wi,n._setScheduler=wt,n._setAsap=bt,n._asap=r,n.prototype={constructor:n,then:g,"catch":function(n){return this.then(null,n)}},n.polyfill=di,n.Promise=n,n.polyfill(),n})